{"version":3,"names":[],"mappings":"","sources":["app.js"],"sourcesContent":["require('howler');\r\nvar app = new Vue({\r\n    el: '#quiz-app',\r\n    data: {\r\n        quiz: [],\r\n        quizShow: [],\r\n        index: Math.floor(Math.random() * 10), // Start index\r\n        responseIndex: 0, // Correct Answer\r\n        lifes: 3, // Initial lifes\r\n        coins: 10,\r\n        hits: 0, // Total of hits\r\n        atualIndex: [],\r\n        timeInit: 0, // Time Init\r\n        time: 0, // Time count\r\n        rank: 0, // Rank\r\n        error: 0,\r\n    },\r\n    methods: {\r\n        saveIndex: function(index) {\r\n            this.atualIndex.push(index);\r\n        },\r\n        alternateIndex: function(index) {\r\n            this.saveIndex(this.index);\r\n            while (this.atualIndex.includes(this.index)) {\r\n                this.index = Math.floor(Math.random() * 10);\r\n            }\r\n        },\r\n        sendResponse: function() {\r\n            if (Number(this.responseIndex) != this.question[\"ans\"]) {\r\n                this.lifes = this.lifes - 1; // Remove 1 life\r\n            }\r\n            if (Number(this.responseIndex) == this.question[\"ans\"]) {\r\n                this.hits = this.hits + 1; // Calc total of hits\r\n                this.coins = this.coins + 10; // Add coins\r\n            }\r\n            this.sendSound();\r\n            this.alternateIndex(); // Alternate index question\r\n        },\r\n        skipResponse: function() {\r\n            this.alternateIndex(); // Alternate index question\r\n        },\r\n        restartQuiz: function() {\r\n            this.responseIndex = 0; // Reset Response Index\r\n            this.index = 0; // Reset Index\r\n            this.lifes = 3; // Reset Lifes\r\n            this.atualIndex = []; // Reset Atual index\r\n        },\r\n        timer: function() {\r\n            setInterval(() => {\r\n                if (this.time > 0 && this.lifes > 0) {\r\n                    return (this.time = this.time - 1);\r\n                }\r\n            }, 1000);\r\n        },\r\n        checkCoins: function() {\r\n            let coins = this.coins;\r\n            if(this.lifes != 0) {\r\n                coins = localStorage.getItem(\"coins\"); // Get in LocalStorage te latest coin update\r\n            }\r\n            if(this.lifes === 0) {\r\n                coins = localStorage.setItem(\"coins\", `${this.coins}`); // Update coins on Local Storage\r\n            }\r\n            return coins;\r\n        },\r\n        checkRank: function() {\r\n            let lifes = this.lifes;\r\n            if (lifes >= 0) {\r\n                this.rank = localStorage.getItem(\"rank\");\r\n            }\r\n            if (this.atualIndex.length - 1 > this.rank) {\r\n                this.rank = this.atualIndex.length;\r\n                localStorage.setItem(\"rank\", `${this.rank}`);\r\n            }\r\n        },\r\n        helpQuestion: function(coins, event) {\r\n            this.coins = this.coins - 5;\r\n        },\r\n        sendSound: function() {\r\n            var sound = new Howl({\r\n                src: '../../sounds/buttons/send.wav',\r\n                volume: 0.5,\r\n            });\r\n            sound.play();\r\n        }\r\n    },\r\n    computed: {\r\n        question: function() {\r\n            let question = {\r\n                \"title\": \"Aguarde, estamos carregando as perguntas.\",\r\n                \"op1\": \"Carregando...\",\r\n                \"op2\": \"Carregando...\",\r\n                \"op3\": \"Carregando...\",\r\n                \"op4\": \"Carregando...\",\r\n                \"ans\": 0,\r\n                \"hard\": 0\r\n            };\r\n            this.quiz.length > 0 && (question = this.quiz[this.index]);\r\n            switch(question['hard']) {\r\n                case 1:\r\n                    this.time = 15\r\n                    this.timeInit = 15\r\n                    break;\r\n                case 2:\r\n                    this.time = 20\r\n                    this.timeInit = 20\r\n                    break;\r\n                case 3:\r\n                    this.time = 25\r\n                    this.timeInit = 25\r\n                    break;\r\n                case 4:\r\n                    this.time = 30\r\n                    this.timeInit = 30\r\n                    break;\r\n                default:\r\n                    this.timeInit = 30\r\n                    this.time = 30\r\n            }\r\n            return question;\r\n        },\r\n        progressStyle: function() {\r\n            if(this.time <= 10) {\r\n                className = 'is-error';\r\n            } else if (this.time <= 15) {\r\n                className = 'is-warning';\r\n            } else if (this.time >= 16) {\r\n                className = 'is-success';\r\n            }\r\n            return className;\r\n        }\r\n    },\r\n    mounted: function() {\r\n        this.timer();\r\n        fetch(\"./data/questions.json\").then(quizResponse => {\r\n            quizResponse.json().then(json => {\r\n                this.quiz = json;\r\n            });\r\n        });\r\n    },\r\n    watch: {\r\n        time: function () {\r\n            if(this.time <= 0) {\r\n                this.lifes = this.lifes - 1; // Remove 1 life\r\n                return this.skipResponse(); // Skip to next question\r\n            }\r\n        },\r\n        lifes: function () {\r\n            this.checkRank();\r\n            this.checkCoins();\r\n        }\r\n    }\r\n});\r\nVue.config.productionTip = false;"],"file":"app.js"}